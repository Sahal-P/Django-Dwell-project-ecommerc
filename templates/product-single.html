
	{% extends 'shop.html' %}

	{% load static %}
	{% block content %}

	{% if messages %}
	{% for message in messages %}
    
      <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
      <script>
        var m = "{{ message }}";
        Swal.fire({
			icon: 'success',
			title: m,
			
			
		  })
      </script>
    
  {% endfor %}
 {% endif %}


 <script>
	$(".carousel").swipe({

		swipe: function(event, direction, distance, duration, fingerCount, fingerData) {
	  
		  if (direction == 'left') $(this).carousel('next');
		  if (direction == 'right') $(this).carousel('prev');
	  
		},
		allowPageScroll:"vertical"
	  
	  });
 </script>
 <style>


select {
	/* Reset Select */
	appearance: none;
	outline: 0;
	border: 1;
	box-shadow: none;
	/* Personalize */
	flex: 1;
	padding: 0 1em;
	color: #000;
	background-color: var(--darkgray);
	background-image: none;
	cursor: pointer;
  }
  /* Remove IE arrow */
  select::-ms-expand {
	display: none;
  }
  /* Custom Select wrapper */
  .select {
	position: relative;
	display: flex;
	
	height: 3em;
	border-radius: 0.25em;
	overflow: hidden;
  }
  /* Arrow */
  .select::after {
	content: "\25BC";
	position: absolute;
	top: 0;
	right: 0;
	padding: 1em;
	background-color: #000;
	transition: 0.25s all ease;
	pointer-events: none;
  }
  /* Transition */
  .select:hover::after {
	color: #f39c12;
  }
  
  /* Other styles*/
  
  
	
	  .carousel-item {
		padding: 15px;
		cursor: -webkit-grabbing;
	  }
	  .carousel-item img {
	
		box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.21);
		transition: 0.25s linear;
	  }
	  .carousel-item:hover img {
		transform: translatey(-1%);
	  }
	  
	  .carousel-indicators li {
		display: inline-block;
		width: 10px;
		height: 10px;
		margin: 1px;
		text-indent: -999px;
		cursor: pointer;
		background-color: #000  ;
		background-color: rgba(0, 0, 0, 0);
		border: 1px solid rgb(0, 0, 0);
		border-radius: 10px;
		margin: 2px;
		position: relative;
		top: 30px;
	  }
	  .carousel-indicators li.active {
		background: rgb(0, 0, 0);
	  }
	  
	  @media only screen and (max-width: 650px) {
		.carousel-item img {
		  height: auto;
		}
	  }
	  .carousel-control-prev {
		left: -50px;
		margin: 0 -25px;
	  }
	  
	  .carousel-control-next {
		right: -50px;
		margin: 0 -25px;
	  }



	  .iz {
		position: relative;
		display: block;
		margin: 0;
		cursor: zoom-in;
	  }
	  .iz:hover {
		overflow: visible;
	  }
	  .iz:hover .iz__zoom {
		opacity: 1;
	  }
	  .iz:hover .iz__zoom-pic {
		will-change: margin-top, margin-right, margin-bottom, margin-left;
		transform: translate3d(0, 0, 0);
		background: #eee;
	  }
	  .iz__zoom {
		position: absolute;
		opacity: 0;
		background: #ddd;
		transition: opacity 0.4s;
		/*set dimensions of zoom-window */
		width: 300px;
		height: 400px;
		overflow: hidden;
		margin-left: 10px;
		pointer-events: none;
	  }
	  .iz__zoom-pic {
		display: block;
		position: absolute;
		left: 50%;
		top: 50%;
		will-change: auto;
	  }
	  
	  .global {
		font: 0.9em/1.4 sans-serif;
		color: #666;
	  }
	  .global body {
		padding: 20px;
	  }
 </style>
		
		<div class="hero-wrap hero-bread" style="background-image: url('images/bg_6.jpg');">
      <div class="container">
        <div class="row no-gutters slider-text align-items-center justify-content-center">
          <div class="col-md-9 ftco-animate text-center">
            <h1 class="mb-0 bread">Product Single</h1>
            <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home</a></span> <span class="mr-2"><a href="index.html">Product</a></span> <span>Product Single</span></p>
          </div>
        </div>
      </div>
    </div>
		
		<section class="ftco-section bg-light">
    	<div class="container">
    		<div class="row">
    			<div class="col-lg-6 mb-5 ftco-animate">
{% for i in obj %}
    				{% comment %} <img class="image-popup"><img src="/media/{{i.product_img1}}" class="img-fluid" alt="Colorlib Template"></img> {% endcomment %}
            

					<div id="carouselExampleIndicators" class="carousel slide" data-interval="2000" data-ride="carousel">
						<ol class="carousel-indicators">
						  <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
						  <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
						  <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
						  <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
						</ol>
						<div class="carousel-inner">
						  <div class="carousel-item active"  >
							<img src="/media/{{i.product_img1}}"  class="d-block w-100 my-foto" alt="...">
						  </div>
						  <div class="carousel-item" >
							<img src="/media/{{i.product_img2}}" class="d-block w-100" alt="...">
						  </div>
						  <div class="carousel-item" >
							<img src="/media/{{i.product_img3}}" class="d-block w-100" alt="...">
						  </div>
						  <div class="carousel-item" >
							<img src="/media/{{i.product_img4}}" class="d-block w-100" alt="...">
						  </div>
						</div>
						<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
						  <span class="carousel-control-prev-icon-dark" aria-hidden="true"></span>
						  <span class="sr-only">Previous</span>
						</a>
						<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
						  <span class="carousel-control-next-icon" aria-hidden="true"></span>
						  <span class="sr-only">Next</span>
						</a>
					  </div>








    			</div>
    			<div class="col-lg-6 product-details pl-md-5 ftco-animate">
    				<h3>{{i.product_name}}</h3>
					{% if i.offer_price is not None and i.offer is not 0 or i.category_offer is not None and i.category.discount is not 0 %}
				
    				<p class="price" ><span class="v_price">₹ {{i.offer_price}}</span></p>
					<span style="text-decoration: line-through;" class="mr-2 price-dc">₹ {{i.original_price}}</span>
					
							{% if i.offer is not None and i.offer is not 0 %}
							<h4 style="color: green;">{{i.offer}}% -Off</h4>
							{% elif i.category_offer is not None and i.category_offer is not 0 %}
							<h4 style="color: green;">{{i.category_offer}}% -Off</h4>
							{% endif %}

					{% else %}
    				<p class="price"><span class="v_price">₹ {{i.selling_price}}</span></p>
					{% endif %}
    				<p>{{i.description}}</p>
    				<p>On her way she met a copy. The copy warned the Little Blind Text, that where it came from it would have been rewritten a thousand times and everything that was left from its origin would be the word "and" and the Little Blind Text should turn around and return to its own, safe country. But nothing the copy said could convince her and so it didn’t take long until a few insidious Copy Writers ambushed her, made her drunk with Longe and Parole and dragged her into their agency, where they abused her for their.
						</p>

						<div class="row mt-4 justify-content-evenly " >
					
					  </div>

            
						<div class="row mt-4 mb-3">

							{% if var is not None %}
							
							<div class="col-md-6">
								<div class="form-group d-flex">
		              <div class="select-wrap">
	                  <div class="icon"><span class="ion-ios-arrow-down"></span></div>
	                  <select name="" id="v_color" class="form-control">
	                  	<option value="">Color</option>
						{% for i in var %}
						<option value="{{i.color}}">{{i.color}}</option>
							
						{% endfor %}
	                   
	                  </select>
	                </div>
		            </div>
							</div>
							<div class="col-md-6">
								<div class="form-group d-flex">
		              <div class="select-wrap">
	                  <div class="icon"><span class="ion-ios-arrow-down"></span></div>
	                  <select name="" id="v_size" class="form-control">
	                  	<option value="">Size</option>
						  {% for i in var2 %}
						  <option value="{{i.size}}">{{i.size}}</option>
							  
						  {% endfor %}
	                    
	                  </select>
	                </div>
		            </div>
							</div>
							{% endif %}

						

							<div class="w-100"></div>
							<div class="input-group col-md-6 d-flex mt-4">

								<p><a onclick=addWish({{i.id}}) class="btn btn-lg btn-outline-light ms-1 ml-2 ">Add to wish <i class="ion-ios-heart-empty"></i></a></p>
						
	             	<!-- <span class="input-group-btn mr-2">
	                	<button type="button" class="quantity-left-minus btn"  data-type="minus" data-field="">
	                   <i class="ion-ios-remove"></i>
	                	</button>
	            		</span>
	             	<input type="text" id="quantity" name="quantity" class="form-control input-number" value="1" min="1" max="100">
	             	<span class="input-group-btn ml-2">
	                	<button type="button" class="quantity-right-plus btn" data-type="plus" data-field="">
	                     <i class="ion-ios-add"></i>
	                 </button>
	             	</span> -->
					
	          	</div>
          	</div>
			
			  {% if i.quantity <= 0 %}
                        <p class="bottom-area d-flex">
                          <a ><span style="font-size: 25px; color: red;">Out of Stock !</span></a>
                          
                      </p>
                        {% else %}
						<div id="cartdiv">
          	<p><a onclick= addcat({{i.id}}) style="color: white;" id="addcart"  class="btn btn-primary py-3 px-5">Add to Cart</a></p>
		</div>
			{% endif %}
			<span id="v_error" style="font-size: 20px; color: red;"></span>
			{% if i.quantity < 10 and i.quantity > 0 %}
			<div class="input-group col-md-6 d-flex mt-4">
			<span style=" color: rgb(255, 0, 0);">Only {{i.quantity}} Left !!</span>
			</div>
			{% endif %}
    			</div>
    		</div>
    	</div>
		{% endfor %}

    </section>

	

    <footer class="ftco-footer bg-light ftco-section">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Modist</h2>
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4 ml-md-5">
              <h2 class="ftco-heading-2">Menu</h2>
              <ul class="list-unstyled">
                <li><a href="#" class="py-2 d-block">Shop</a></li>
                <li><a href="#" class="py-2 d-block">About</a></li>
                <li><a href="#" class="py-2 d-block">Journal</a></li>
                <li><a href="#" class="py-2 d-block">Contact Us</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md-4">
             <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Help</h2>
              <div class="d-flex">
	              <ul class="list-unstyled mr-l-5 pr-l-3 mr-4">
	                <li><a href="#" class="py-2 d-block">Shipping Information</a></li>
	                <li><a href="#" class="py-2 d-block">Returns &amp; Exchange</a></li>
	                <li><a href="#" class="py-2 d-block">Terms &amp; Conditions</a></li>
	                <li><a href="#" class="py-2 d-block">Privacy Policy</a></li>
	              </ul>
	              <ul class="list-unstyled">
	                <li><a href="#" class="py-2 d-block">FAQs</a></li>
	                <li><a href="#" class="py-2 d-block">Contact</a></li>
	              </ul>
	            </div>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
            	<h2 class="ftco-heading-2">Have a Questions?</h2>
            	<div class="block-23 mb-3">
	              <ul>
	                <li><span class="icon icon-map-marker"></span><span class="text">203 Fake St. Mountain View, San Francisco, California, USA</span></li>
	                <li><a href="#"><span class="icon icon-phone"></span><span class="text">+2 392 3929 210</span></a></li>
	                <li><a href="#"><span class="icon icon-envelope"></span><span class="text">info@yourdomain.com</span></a></li>
	              </ul>
	            </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">

            <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart color-danger" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
						  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						</p>
          </div>
        </div>
      </div>
    </footer>
    
  

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


  <script src="{% static "js/jquery.min.js" %}"></script>
  <script src="{% static "js/jquery-migrate-3.0.1.min.js" %}"></script>
  <script src="{% static "js/popper.min.js" %}"></script>
  <script src="{% static "js/bootstrap.min.js" %}"></script>
  <script src="{% static "js/jquery.easing.1.3.js" %}"></script>
  <script src="{% static "js/jquery.waypoints.min.js" %}"></script>
  <script src="{% static "js/jquery.stellar.min.js" %}"></script>
  <script src="{% static "js/owl.carousel.min.js" %}"></script>
  <script src="{% static "js/jquery.magnific-popup.min.js" %}"></script>
  <script src="{% static "js/aos.js" %}"></script>
  <script src="{% static "js/jquery.animateNumber.min.js" %}"></script>
  <script src="{% static "js/bootstrap-datepicker.js" %}"></script>
  <script src="{% static "js/scrollax.min.js" %}"></script>
  <script src="{% static "js/imagezoom.js" %}"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="{% static "js/google-map.js" %}"></script>
  <script src="{% static "js/main.js" %}"></script>

  <script>
		$(document).ready(function(){

		var quantitiy=0;
		   $('.quantity-right-plus').click(function(e){
		        
		        // Stop acting like a button
		        e.preventDefault();
		        // Get the field name
		        var quantity = parseInt($('#quantity').val());
		        
		        // If is not undefined
		            
		            $('#quantity').val(quantity + 1);

		          
		            // Increment
		        
		    });

		     $('.quantity-left-minus').click(function(e){
		        // Stop acting like a button
		        e.preventDefault();
		        // Get the field name
		        var quantity = parseInt($('#quantity').val());
		        
		        // If is not undefined
		      
		            // Increment
		            if(quantity>0){
		            $('#quantity').val(quantity - 1);
		            }
		    });
		    
		});
	</script>
    <script>

		function addWish(id){
			  
		  
			  var url = "{% url 'add_to_wishlist' %}"
			  $.ajax({
				  type:"GET",
				  url : url,
				  data : {"id" : id},
				  success : function(r) {
	  
					Swal.fire(
					  'Product Added To Wishlist!',
					  '!',
					  'success'
					)
					  
				  },
				  error: function() {
					Swal.fire('Product Already Added')
				  }
			  });
		  }
	  
	  
function addcat(id){
	color = $("#v_color").val()
	size  = $("#v_size").val()
	
	if (color !='' && size !=''){
		console.log("true")
	}
	else{
		color = 0
		size = 0
	}
    $.ajax({
      type:"GET",
      url : "{% url 'add_cart' %}",
      data : {"id" : id ,"color":color,"size":size},
      success : function(r) {
        
        if (r.status==true){

          Swal.fire('Product already added ','!',
          'success')
        
        }
        else{

          Swal.fire(
          'Product Added To Wishlist!',
          '!',
          'success'
        )
        }
      },
      error: function() {
        Swal.fire('error occured during ')
      }
  });
}
		$("#v_color").change(function (){
			console.log("<<<<<<<")
			color = $("#v_color").val()
			size  = $("#v_size").val()
			$.ajax({
				type:"GET",
				url : "{% url 'check_variation' %}",
				data : {"color" : color,"size":size},
				success : function(r) {
				  
				  if (r.status==true){
					$("#cartdiv").show();
					$("#v_error").text("");
					$(".v_price").text("₹"+ r.price);
					alertify.set('notifier','position', 'top-right');
              		alertify.success('Available.!');

				
				  }
				  else{
					$("#cartdiv").hide();
					$("#v_error").text("Selected variation not available.!");
					alertify.set('notifier','position', 'top-right');
              		alertify.error('Not Available.!');
				  }
				},
				error: function() {
				  Swal.fire('error occured during ')
				}
			});

		});
		$("#v_size").change(function (){
			console.log("<<<<<<<")
			color = $("#v_color").val()
			size  = $("#v_size").val()
			$.ajax({
				type:"GET",
				url : "{% url 'check_variation' %}",
				data : {"color" : color,"size":size},
				success : function(r) {
				  
				  if (r.status==true){
					$("#cartdiv").show();
					$("#v_error").text("");
					$(".v_price").text("₹"+ r.price);
					alertify.set('notifier','position', 'top-right');
              		alertify.success('Available.!');


		  
					
				  }
				  else{
					$("#cartdiv").hide();
					$("#v_error").text("Selected variation not available.!");
					alertify.set('notifier','position', 'top-right');
              		alertify.error('Not Available.!');
					
				
				  }
				},
				error: function() {
				  Swal.fire('error occured during ')
				}
			});

		});


	  
	  
	  </script>

	{% endblock %}
